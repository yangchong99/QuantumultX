// ==UserScript==
// @Author            @yangchong99
// @UpdateTime        2023/12/6
// @MainFunction      å»å¼€å±å¹¿å‘Šã€åº”ç”¨å‡€åŒ–ã€è¶…çº§VIPã€æ™ºèƒ½åˆ†æµã€è‡ªåŠ¨ä¼˜é€‰ã€å›¾æ ‡è®¢é˜…ã€æµåª’ä½“æŸ¥è¯¢ã€Boxjsè®¢é˜…
// @ExpressThanks     @yangchong99,@ddgksf2013,@Nick-workflow,@KOP-XIAO,@DivineEngine,@blackmatrix7,@Orz-3,@yjqiang,@O7Y0,@Peng-YM,@Neurogram-R,@id77,@NobyDa,@17mon
// @ConfigVersion     2.0 
// @ConfigURL         
// ==/UserScript==


[general]
# ç”¨äºèŠ‚ç‚¹å»¶è¿Ÿæµ‹è¯•
server_check_url= http://www.gstatic.com/generate_204
# æœåŠ¡å™¨æµ‹è¯•è¶…æ—¶æ—¶é—´ (æ¯«ç§’)
server_check_timeout = 3000
# ç”¨äºè®¾ç½®å›¾æ ‡æ˜¾ç¤º
profile_img_url=https://github.githubassets.com/images/modules/site/integrators/google.png
# ç”¨äºCheckèŠ‚ç‚¹IPåœ°å€(ä»¥ä¸‹geo_location_checkerä»»é€‰ä¸€ä¸ªå³å¯)
geo_location_checker=disabled
;geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js
# åŠŸèƒ½å¼ºå¤§çš„è§£æå™¨ï¼Œç”¨äºå¼•ç”¨èµ„æºçš„è½¬æ¢
resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js
# ä¸‹åˆ—è·¯å¾„å°†ä¸ç»è¿‡QuanXçš„å¤„ç†
excluded_routes=239.255.255.250/32, 24.105.30.129/32, 185.60.112.157/32, 185.60.112.158/32, 182.162.132.1/32, 192.168.0.0/16, 10.0.0.0/8, 172.16.0.0/12, 100.64.0.0/10, 17.0.0.0/8
udp_whitelist=1-442, 444-65535
# ç¬¬ä¸€ä¸ªfilterä¸º4gæ¨¡å¼å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬äºŒä¸ªfilterä¸ºå…¶ä»–wifiä¸‹å¼€å¯è§„åˆ™åˆ†æµï¼Œç¬¬ä¸‰ä¸ªwifi1ä¿®æ”¹æˆä½ è·¯ç”±å™¨ç¿»å¢™çš„wifiåå¼€å¯ç›´è¿æ¨¡å¼ï¼Œç¬¬å››ä¸ªwifi2ä¸ºä½ å…¬å¸æˆ–è€…å…¶ä»–æœ‰è·¯ç”±å™¨ç¿»å¢™çš„WiFiåèµ°ç›´è¿ï¼‰
# é»˜è®¤å…³é—­æ ¹æ®wifiåˆ‡æ¢æ¨¡å¼ï¼Œå¦‚éœ€å¼€å¯ï¼Œåˆ é™¤ä¸‹æ–¹çš„"#"å³å¯
;running_mode_trigger=filter, filter, wifi1:all_direct, wifi2: all_direct
dns_exclusion_list=*.cmpassport.com, *.jegotrip.com.cn, *.icitymobile.mobi, id6.me, *.pingan.com.cn, *.cmbchina.com, *.10099.com.cn


[dns]
;prefer-doh3
;doh-server = https://223.5.5.5/dns-query, https://223.6.6.6/dns-query
no-ipv6
no-system
server=223.5.5.5
server=119.29.29.29
server=114.114.114.114
server=/*.icloud.com/119.29.29.29
server=/*.icloud.com.cn/119.29.29.29
;server=/*.tencent.com/119.29.29.29
;server=/*.weixin.com/119.29.29.29



[policy]
url-latency-benchmark=Auto, server-tag-regex=^(.(?!(ç½‘æ˜“|å¢¨é±¼|è·ç¦»|å¥—é¤|å¯¼èˆª)))*$, check-interval=21600, tolerance=0,img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Auto.png
static=OpenAI, ğŸ‡ºğŸ‡¸ ç¾å›½03âš¡ï¸[1.0x], ğŸ‡ºğŸ‡¸ ç¾å›½04âš¡ï¸[1.0x], ğŸ‡ºğŸ‡¸ ç¾å›½05âš¡ï¸[1.0x], ğŸ‡ºğŸ‡¸ ç¾å›½06âš¡ï¸[1.0x], img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Bot.png
static=NewBing, ğŸ‡³ğŸ‡± è·å…°01âš¡ï¸[1.0x], ğŸ‡³ğŸ‡± è·å…°02âš¡ï¸[1.0x], img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Microsoft.png
static=Global, Auto, proxy, direct, HK, TW, JP, SG, US, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Global.png
static=Apple, direct, proxy, HK, TW, JP, SG, US, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Apple.png
static=GlobalMedia, Auto, proxy, direct, TW, HK, JP, SG, US, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Streaming.png
static=Others, server-tag-regex=^(?!.*(æ¸¯|å°|æ—¥|éŸ©|æ–°|ç‹®|ç…|è·|ç¾|HK|US|TW|JP|KR|SG|Hong|Tai|Japan|Korea|Singapore|States)), img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Static.png
static=Final, Auto, proxy, direct, Global, HK, TW, JP, SG, US, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/Final.png
;static=Bilibili, direct, é¦™æ¸¯èŠ‚ç‚¹, å°æ¹¾èŠ‚ç‚¹, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/bilibili.png

#é»˜è®¤è®¾ç½®2ä¸ªå°æ—¶æµ‹é€Ÿä¸€æ¬¡ï¼Œå¯è‡ªè¡Œä¿®æ”¹check-interval=åé¢çš„æ•°å€¼ï¼ˆå•ä½ï¼šç§’ï¼‰ï¼Œtolerance=åé¢çš„æ•°å€¼ä¸å»ºè®®ä¿®æ”¹
url-latency-benchmark=HK, server-tag-regex=(?=.*(æ¸¯|HK|(?i)Hong))^((?!(å°|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=7200, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/HK.png
url-latency-benchmark=TW, server-tag-regex=(?=.*(å°|TW|(?i)Taiwan))^((?!(æ¸¯|æ—¥|éŸ©|æ–°|ç¾)).)*$, check-interval=7200, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/TW.png
url-latency-benchmark=JP, server-tag-regex=(?=.*(æ—¥|JP|(?i)Japan))^((?!(æ¸¯|å°|éŸ©|æ–°|ç¾)).)*$, check-interval=7200, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/JP.png
url-latency-benchmark=SG, server-tag-regex=(?=.*(æ–°|ç‹®|ç…|SG|(?i)Singapore))^((?!(æ¸¯|å°|æ—¥|éŸ©|ç¾)).)*$, check-interval=7200, tolerance=0, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/SG.png
url-latency-benchmark=US, server-tag-regex=(?=.*(ç¾|US|(?i)States|American))^((?!(æ¸¯|å°|æ—¥|éŸ©|æ–°)).)*$, check-interval=600, tolerance=0, alive-checking=false, img-url=https://raw.githubusercontent.com/Orz-3/mini/master/Color/US.png


[server_local]



[server_remote]
# > é­”æ³•ä»…ä¾›ä¸´æ—¶ä½¿ç”¨1
;https://raw.githubusercontent.com/Jsnzkpg/Jsnzkpg/Jsnzkpg/Jsnzkpg#delreg=.*&rename=@tg%40ddgksf2021-num-+@$index0, tag=ğŸŸä¸´æ—¶ä½¿ç”¨, update-interval=3600, opt-parser=true, enabled=true
# > èŠ‚ç‚¹é“¾æ¥
https://gist.githubusercontent.com/xiaomaoJT/921025f761277153bebb30abde7f784f/raw/XiaoMao-Forever#del=1, tag=XiaoMao-Forever, img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/Color/Panda.png, update-interval=172800, opt-parser=true, enabled=false



[filter_remote]
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Unbreak.list, tag=è§„åˆ™ä¿®æ­£, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-quanx.txt, tag=å¹¿å‘Šç»ˆç»“è€…, force-policy=reject, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/yangchong99/QuantumultX/main/Filter/Bing.list, tag=æ–°å¿…åº”, force-policy=NewBing, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/WeChat/WeChat.list, tag=å¾®ä¿¡ç›´è¿, force-policy=direct, update-interval=172800, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Filter/master/OpenAi.list, tag=OpenAi, force-policy=OpenAI, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Spotify/Spotify.list, tag=SpotifyéŸ³ä¹, force-policy=HK, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Global.list, tag=å…¨çƒåŠ é€Ÿ, force-policy=Global, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/Apple/Apple.list, tag=è‹¹æœæœåŠ¡, force-policy=Apple, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/QuantumultX/ChinaASN/ChinaASN.list, tag=å›½å†…ç½‘ç«™, force-policy=direct, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/ddgksf2013/Filter/master/Streaming.list, tag=å›½é™…åª’ä½“, force-policy=GlobalMedia, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/DivineEngine/Profiles/master/Surge/Ruleset/Extra/Google/GoogleVoice.list, tag=Google Voice, force-policy=US, update-interval=172800, opt-parser=true, enabled=false
;https://raw.githubusercontent.com/ddgksf2013/Filter/master/StreamingSE.list, tag=å“”å“©å“”å“©, force-policy=Bilibili, update-interval=172800, opt-parser=true, enabled=false


[filter_local]

# > ä¸€äº›æ¯”è¾ƒå®¹æ˜“å¿½è§†çš„åˆ†æµ
host, ad.12306.cn, direct
host, gg.caixin.com, direct
host, sdkapp.uve.weibo.com, direct
host-suffix, ucweb.com, direct
host, ntb.lanjie100.com, reject

# > è´´å§å±è”½åŸŸådnsæŸ¥è¯¢
ip-cidr, 180.76.76.200/32, reject

# > local
ip-cidr, 10.0.0.0/8, direct
ip-cidr, 127.0.0.0/8, direct
ip-cidr, 172.16.0.0/12, direct
ip-cidr, 192.168.0.0/16, direct
ip-cidr, 224.0.0.0/24, direct
ip-cidr, 182.254.116.0/24, direct
;geoip, cn, direct
final, Final


[rewrite_local]


[rewrite_remote]
https://gist.githubusercontent.com/ddgksf2013/dbb1695cd96743eef18f3fac5c6fe227/raw/revenuecat.js, tag=RevenueCatå¤šåˆä¸€, update-interval=172800, opt-parser=true, enabled=true

# ======= ä¼šå‘˜è§£é” ======= #
https://raw.githubusercontent.com/app2smile/rules/master/module/bilibili-qx.conf, tag=Bç«™å»å¹¿å‘Š, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/ddgksf2013/dev/master/ForOwnUse.conf, tag=Moyuself-VIP, update-interval=86400, opt-parser=true, enabled=true
https://raw.githubusercontent.com/gjwj666/qx/main/zhbd.js, tag=iosé¸¡ç¥-çŸ¥ä¹ä¼šå‘˜, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/ddgksf2013/MoYu/master/NicegramProCrack.js, tag=Nicegramä¼šå‘˜, update-interval=-1, opt-parser=true, enabled=false
;https://raw.gitmirror.com/limbopro/Adblock4limbo/main/Adblock4limbo.conf, tag=æ¯’å¥¶å»ç½‘é¡µå¹¿å‘Šè®¡åˆ’ï¼ˆç¨³å®šç‰ˆï¼‰, update-interval=172800, opt-parser=true, enabled=true
;https://raw.githubusercontent.com/app2smile/rules/master/module/spotify.conf, tag=SpotifyéŸ³ä¹VIP@app2smile, update-interval=86400, opt-parser=false, enabled=false

# ======= å¹¿å‘Šå‡€åŒ– ======= #
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/StartUp.conf, tag=å¢¨é±¼å»å¼€å±2.0, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zheye/zheye.snippet, tag=çŸ¥ä¹å»å¹¿å‘ŠåŠä½“éªŒå¢å¼º, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/Applet.conf, tag=å¾®ä¿¡å°ç¨‹åºå»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/YoutubeAds.conf, tag=æ²¹ç®¡å»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/Weibo.conf, tag=å¾®åšå»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/Amap.conf, tag=é«˜å¾·åœ°å›¾å‡€åŒ–, update-interval=86400, opt-parser=false, enabled=true
;https://github.com/ddgksf2013/Rewrite/raw/master/AdBlock/Netease.conf, tag=ç½‘æ˜“äº‘å»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=false
;https://gist.githubusercontent.com/ddgksf2013/beec132ca0c3570ffa0cf331bce8f82a/raw/baidumap.adblock.conf, tag=ç™¾åº¦åœ°å›¾å‡€åŒ–[å¸è½½é‡è£…]@ddgksf2013, update-interval=86400, opt-parser=false, enabled=false
;https://github.com/app2smile/rules/raw/master/module/tieba-qx.conf, tag=ç™¾åº¦è´´å§å»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=false

# ======= ç½‘é¡µä¼˜åŒ– ======= #
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/Html/WebAdBlock.conf, tag=å½±è§†ç½‘ç«™å»å¹¿å‘Š, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/Html/Q-Search.conf, tag=Safariè¶…çº§æœç´¢, update-interval=86400, opt-parser=false, enabled=true
;https://github.com/ddgksf2013/Rewrite/raw/master/Html/Douban.conf, tag=è±†ç“£ç”µå½±ç½‘é¡µå¿«æ·è·³è½¬, update-interval=86400, opt-parser=false, enabled=false


# ======= åŠŸèƒ½å¢å¼º ======= #
https://gist.githubusercontent.com/ddgksf2013/f4752e632fd3375ea2811985c5b635dc/raw/alicloud.js, tag=é˜¿é‡Œäº‘ç›˜å‡€åŒ–+ä¼šå‘˜, update-interval=-1, opt-parser=true, enabled=true
https://raw.githubusercontent.com/ddgksf2013/Rewrite/master/AdBlock/XiaoHongShu.conf, tag=å°çº¢ä¹¦å‡€åŒ–+å»æ°´å°, update-interval=86400, opt-parser=false, enabled=true
https://gist.githubusercontent.com/ddgksf2013/f43026707830c7818ee3ba624e383c8d/raw/baiduCloud.vip.js, tag=ç™¾åº¦ç½‘ç›˜å‡€åŒ–+å€é€Ÿ, update-interval=-1, opt-parser=true, enabled=true
https://raw.githubusercontent.com/zZPiglet/Task/master/UnblockURLinWeChat.conf, tag=å¾®ä¿¡è§£é”è¢«å±è”½çš„URL, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/DivineEngine/Profiles/master/Quantumult/Rewrite/General.conf, tag=ç¥æœºé‡å®šå‘@DivineEngine, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/id77/QuantumultX/master/rewrite/Youtube_CC.conf#out=Hant, tag=æ²¹ç®¡å­—å¹•ç¿»è¯‘@id77, update-interval=86400, opt-parser=false, enabled=true
https://raw.githubusercontent.com/Peng-YM/Sub-Store/master/config/QX.snippet, tag=Sub-Store, update-interval=172800, opt-parser=true, enabled=true
https://raw.githubusercontent.com/chavyleung/scripts/master/box/rewrite/boxjs.rewrite.quanx.conf, tag=BoxJS, update-interval=86400, opt-parser=false, enabled=true
;https://raw.githubusercontent.com/Orz-3/QuantumultX/master/Netflix_ratings.conf, tag=Netflixè¯„åˆ†@Orz-3, update-interval=86400, opt-parser=false, enabled=false

[task_local]
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/geo_location.js, tag=GeoIP æŸ¥è¯¢, img-url=location.fill.viewfinder.system, enabled=true

# > æµåª’ä½“è§£é”æŸ¥è¯¢
event-interaction https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/streaming-ui-check.js, tag=æµåª’ä½“è§£é”æŸ¥è¯¢, img-url=arrowtriangle.right.square.system, enabled=true
# > è¯·æ‰‹åŠ¨æ·»åŠ ä¸‹é¢çš„è®¢é˜…ï¼ˆæµåª’ä½“Taskè®¢é˜…é›†åˆï¼‰
;https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/UI-Action.json




[http_backend]

# > Boxjsè®¾ç½®ï¼Œæ”¹ä¸ºä½¿ç”¨http backendæ–¹å¼ï¼Œè®¿é—®åœ°å€æ”¹ä¸ºhttp://127.0.0.1:9999ï¼Œæ›´æ–°é…ç½®åè¯·é•¿æŒ‰é£è½¦-æ›´æ–°ï¼Œç„¶åé‡å¯ä»£ç†
# > BoxJsç›¸å…³æ•™ç¨‹å‚è€ƒ https://chavyleung.gitbook.io/boxjs/
https://raw.githubusercontent.com/chavyleung/scripts/master/chavy.box.js, host=boxjs.com, tag=BoxJS, path=^/, enabled=true



[mitm]
passphrase = 
p12 = 

skip_validating_cert = true
force_sni_domain_name = false

hostname = -*.apple.com, -weather-data.apple.com, -*amemv.com, -*snssdk.com, -www.google.com, -consumer.fcbox.com

# ğŸŸ¢ æé†’passphraseå’Œp12ä»£ä¸ºè¯ä¹¦&ä¸»æœºåéƒ¨åˆ†, æ›´æ–°é…ç½®å‰å¯æŠŠæ—§çš„é…ç½®ä¸­passphraseå’Œp12ä»£ç æ‹·è´ä¸‹æ¥, å¯¼å…¥æ–°çš„é…ç½®æ–‡ä»¶æŠŠå†…å®¹ç²˜è´´åœ¨å¯¹åº”ä½ç½®å°±ä¸ç”¨é‡è£…è¯ä¹¦
